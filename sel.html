<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Drag & Drop: Struktur Sel</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            touch-action: manipulation;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 10px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #4a5568;
            margin: 0 0 10px 0;
            font-size: 1.8rem;
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            background: #4299e1;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
        }

        .game-area {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .level-info {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(45deg, #4299e1, #667eea);
            color: white;
            border-radius: 10px;
        }

        .challenge-description {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #4299e1;
        }

        .challenge-description h3 {
            margin: 0 0 10px 0;
            color: #2d3748;
        }

        .cell-workspace {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            margin-bottom: 20px;
        }

        .cell-diagram {
            position: relative;
            background: #f0f8ff;
            border: 3px solid #4299e1;
            border-radius: 20px;
            min-height: 400px;
            padding: 20px;
            overflow: hidden;
        }

        .cell-membrane {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 2px dashed #667eea;
            border-radius: 15px;
            background: rgba(102, 126, 234, 0.05);
        }

        .organelle-bank {
            background: #edf2f7;
            border-radius: 10px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .organelle-bank h4 {
            margin: 0 0 15px 0;
            text-align: center;
            color: #2d3748;
        }

        .organelle-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 8px;
            cursor: grab;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .organelle-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            border-color: #4299e1;
        }

        .organelle-item.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }

        .organelle-item.used {
            opacity: 0.3;
            cursor: not-allowed;
            background: #e2e8f0;
        }

        .organelle-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            font-weight: bold;
        }

        .organelle-info {
            flex: 1;
        }

        .organelle-name {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 2px;
        }

        .organelle-function {
            font-size: 0.85rem;
            color: #718096;
        }

        .drop-zone {
            position: absolute;
            width: 80px;
            height: 80px;
            border: 3px dashed #cbd5e0;
            border-radius: 50%;
            background: rgba(203, 213, 224, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #718096;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .drop-zone:hover {
            border-color: #4299e1;
            background: rgba(66, 153, 225, 0.1);
            transform: scale(1.05);
        }

        .drop-zone.drag-over {
            border-color: #48bb78;
            background: rgba(72, 187, 120, 0.2);
            transform: scale(1.1);
        }

        .drop-zone.filled {
            border-color: #48bb78;
            background: rgba(72, 187, 120, 0.1);
        }

        .drop-zone.wrong {
            border-color: #e53e3e;
            background: rgba(229, 62, 62, 0.1);
            animation: wrongShake 0.5s ease;
        }

        .placed-organelle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .placed-organelle:hover {
            transform: scale(1.1);
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            display: none;
        }

        .feedback.correct {
            background: #c6f6d5;
            color: #22543d;
            border: 2px solid #48bb78;
        }

        .feedback.wrong {
            background: #fed7d7;
            color: #742a2a;
            border: 2px solid #e53e3e;
        }

        .feedback.info {
            background: #bee3f8;
            color: #2a4365;
            border: 2px solid #4299e1;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            touch-action: manipulation;
        }

        .btn-primary {
            background: #4299e1;
            color: white;
        }

        .btn-primary:hover {
            background: #3182ce;
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
        }

        .btn-warning {
            background: #ed8936;
            color: white;
        }

        .btn-warning:hover {
            background: #dd6b20;
        }

        .progress-container {
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        .progress-text {
            text-align: center;
            margin-top: 5px;
            font-size: 0.9rem;
            color: #4a5568;
        }

        .hint-system {
            background: #fef5e7;
            border: 1px solid #f6ad55;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }

        .hint-system.active {
            display: block;
        }

        @media (max-width: 768px) {
            .cell-workspace {
                grid-template-columns: 1fr;
            }
            
            .organelle-bank {
                max-height: 200px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .drop-zone {
                width: 60px;
                height: 60px;
                font-size: 10px;
            }
            
            .placed-organelle {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß¨ Game Drag & Drop: Struktur Sel</h1>
            <p>Latih penalaran kritis dengan menempatkan organel sesuai fungsinya!</p>
        </div>

        <div class="game-stats">
            <div class="stat-item">
                <div>Level</div>
                <div id="currentLevel">1</div>
            </div>
            <div class="stat-item">
                <div>Skor</div>
                <div id="score">0</div>
            </div>
            <div class="stat-item">
                <div>Benar</div>
                <div id="correctCount">0</div>
            </div>
            <div class="stat-item">
                <div>Hint</div>
                <div id="hintCount">3</div>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">Level 1 dari 5</div>
        </div>

        <div class="game-area">
            <div class="level-info">
                <h2 id="levelTitle">Level 1: Organel Dasar</h2>
                <p id="levelDescription">Tempatkan organel-organel dasar sesuai dengan fungsi dan lokasinya dalam sel</p>
            </div>

            <div class="challenge-description">
                <h3 id="challengeTitle">üéØ Tantangan:</h3>
                <p id="challengeText">Drag organel dari bank ke posisi yang tepat dalam sel. Pikirkan fungsi setiap organel!</p>
            </div>

            <div class="hint-system" id="hintSystem">
                <h4>üí° Hint:</h4>
                <p id="hintText"></p>
            </div>

            <div class="cell-workspace">
                <div class="cell-diagram" id="cellDiagram">
                    <div class="cell-membrane"></div>
                    <!-- Drop zones akan dibuat dinamis -->
                </div>

                <div class="organelle-bank">
                    <h4>üß™ Bank Organel</h4>
                    <div id="organelleList">
                        <!-- Organel items akan dibuat dinamis -->
                    </div>
                </div>
            </div>

            <div class="feedback" id="feedback"></div>

            <div class="controls">
                <button class="btn btn-warning" onclick="showHint()" id="hintBtn">üí° Hint</button>
                <button class="btn btn-primary" onclick="checkAnswer()" id="checkBtn">‚úÖ Periksa Jawaban</button>
                <button class="btn btn-success" onclick="nextLevel()" id="nextBtn" style="display: none;">‚û°Ô∏è Level Berikutnya</button>
                <button class="btn btn-primary" onclick="resetLevel()" id="resetBtn">üîÑ Reset</button>
            </div>
        </div>
    </div>

    <script>
        let currentLevel = 1;
        let score = 0;
        let correctCount = 0;
        let hintCount = 3;
        let placedOrganelles = {};
        let draggedElement = null;

        const organelleData = {
            nucleus: {
                name: 'Nukleus',
                function: 'Pusat kendali sel, menyimpan DNA',
                color: '#e53e3e',
                emoji: 'üî¥',
                size: 'large'
            },
            mitochondria: {
                name: 'Mitokondria',
                function: 'Pembangkit energi sel (ATP)',
                color: '#38a169',
                emoji: '‚ö°',
                size: 'medium'
            },
            ribosome: {
                name: 'Ribosom',
                function: 'Sintesis protein',
                color: '#3182ce',
                emoji: 'üîµ',
                size: 'small'
            },
            er_rough: {
                name: 'RE Kasar',
                function: 'Sintesis protein (dengan ribosom)',
                color: '#805ad5',
                emoji: 'üü£',
                size: 'medium'
            },
            er_smooth: {
                name: 'RE Halus',
                function: 'Sintesis lipid (tanpa ribosom)',
                color: '#9f7aea',
                emoji: 'üü™',
                size: 'medium'
            },
            golgi: {
                name: 'Badan Golgi',
                function: 'Modifikasi dan pengiriman protein',
                color: '#d69e2e',
                emoji: 'üü°',
                size: 'medium'
            },
            lysosome: {
                name: 'Lisosom',
                function: 'Pencernaan seluler',
                color: '#e53e3e',
                emoji: 'üî¥',
                size: 'small'
            },
            vacuole: {
                name: 'Vakuola',
                function: 'Penyimpanan dan dukungan struktural',
                color: '#4299e1',
                emoji: 'üíß',
                size: 'large'
            },
            chloroplast: {
                name: 'Kloroplas',
                function: 'Fotosintesis (hanya sel tumbuhan)',
                color: '#48bb78',
                emoji: 'üåø',
                size: 'large'
            },
            centriole: {
                name: 'Sentriol',
                function: 'Pembelahan sel (hanya sel hewan)',
                color: '#718096',
                emoji: '‚≠ï',
                size: 'small'
            }
        };

        const levels = [
            {
                title: "Level 1: Organel Dasar",
                description: "Tempatkan organel-organel dasar sesuai dengan fungsi dan lokasinya dalam sel",
                challenge: "Drag organel dari bank ke posisi yang tepat dalam sel. Pikirkan fungsi setiap organel!",
                organelles: ['nucleus', 'mitochondria', 'ribosome'],
                dropZones: [
                    { id: 'nucleus', x: '45%', y: '45%', correct: 'nucleus', label: 'Pusat Sel' },
                    { id: 'mitochondria', x: '70%', y: '30%', correct: 'mitochondria', label: 'Energi' },
                    { id: 'ribosome', x: '25%', y: '60%', correct: 'ribosome', label: 'Protein' }
                ],
                hints: [
                    "Nukleus biasanya berada di tengah sel sebagai pusat kendali",
                    "Mitokondria tersebar di sitoplasma untuk menyuplai energi",
                    "Ribosom dapat ditemukan bebas di sitoplasma atau menempel pada RE"
                ]
            },
            {
                title: "Level 2: Sistem Endomembran",
                description: "Pahami hubungan antara RE, Badan Golgi, dan Lisosom dalam sistem endomembran",
                challenge: "Tempatkan organel sistem endomembran sesuai alur kerja: RE ‚Üí Golgi ‚Üí Lisosom",
                organelles: ['er_rough', 'golgi', 'lysosome', 'ribosome'],
                dropZones: [
                    { id: 'er_rough', x: '30%', y: '40%', correct: 'er_rough', label: 'RE Kasar' },
                    { id: 'golgi', x: '55%', y: '35%', correct: 'golgi', label: 'Modifikasi' },
                    { id: 'lysosome', x: '75%', y: '55%', correct: 'lysosome', label: 'Pencernaan' },
                    { id: 'ribosome', x: '25%', y: '25%', correct: 'ribosome', label: 'Sintesis' }
                ],
                hints: [
                    "RE Kasar memiliki ribosom yang mensintesis protein",
                    "Protein dari RE dikirim ke Badan Golgi untuk dimodifikasi",
                    "Lisosom menerima enzim dari Badan Golgi untuk pencernaan"
                ]
            },
            {
                title: "Level 3: Sel Tumbuhan vs Hewan",
                description: "Identifikasi perbedaan organel antara sel tumbuhan dan sel hewan",
                challenge: "Pilih organel yang tepat: Kloroplas dan Vakuola untuk tumbuhan, Sentriol untuk hewan",
                organelles: ['chloroplast', 'vacuole', 'centriole', 'nucleus'],
                dropZones: [
                    { id: 'chloroplast', x: '25%', y: '25%', correct: 'chloroplast', label: 'Fotosintesis' },
                    { id: 'vacuole', x: '65%', y: '65%', correct: 'vacuole', label: 'Penyimpanan' },
                    { id: 'centriole', x: '45%', y: '20%', correct: 'centriole', label: 'Pembelahan' },
                    { id: 'nucleus', x: '45%', y: '45%', correct: 'nucleus', label: 'Pusat' }
                ],
                hints: [
                    "Kloroplas hanya ada di sel tumbuhan untuk fotosintesis",
                    "Vakuola besar hanya ada di sel tumbuhan",
                    "Sentriol hanya ada di sel hewan untuk pembelahan sel"
                ]
            },
            {
                title: "Level 4: Spesialisasi Fungsi",
                description: "Tempatkan organel berdasarkan spesialisasi fungsi seluler yang kompleks",
                challenge: "Analisis kebutuhan sel: energi, sintesis, transport, dan pencernaan",
                organelles: ['mitochondria', 'er_smooth', 'er_rough', 'golgi', 'lysosome'],
                dropZones: [
                    { id: 'mitochondria', x: '70%', y: '30%', correct: 'mitochondria', label: 'ATP' },
                    { id: 'er_smooth', x: '30%', y: '60%', correct: 'er_smooth', label: 'Lipid' },
                    { id: 'er_rough', x: '25%', y: '35%', correct: 'er_rough', label: 'Protein' },
                    { id: 'golgi', x: '50%', y: '25%', correct: 'golgi', label: 'Paket' },
                    { id: 'lysosome', x: '65%', y: '60%', correct: 'lysosome', label: 'Cerna' }
                ],
                hints: [
                    "RE Halus tidak memiliki ribosom, khusus untuk sintesis lipid",
                    "RE Kasar memiliki ribosom untuk sintesis protein",
                    "Alur: RE ‚Üí Golgi ‚Üí target akhir (membran/sekresi/lisosom)"
                ]
            },
            {
                title: "Level 5: Master Sel",
                description: "Tantangan akhir: Susun sel lengkap dengan semua organel utama",
                challenge: "Buat sel yang sempurna dengan mempertimbangkan lokasi dan interaksi antar organel",
                organelles: ['nucleus', 'mitochondria', 'er_rough', 'er_smooth', 'golgi', 'lysosome', 'ribosome'],
                dropZones: [
                    { id: 'nucleus', x: '45%', y: '45%', correct: 'nucleus', label: 'Pusat' },
                    { id: 'mitochondria1', x: '70%', y: '25%', correct: 'mitochondria', label: 'ATP-1' },
                    { id: 'mitochondria2', x: '25%', y: '70%', correct: 'mitochondria', label: 'ATP-2' },
                    { id: 'er_rough', x: '25%', y: '35%', correct: 'er_rough', label: 'RE-K' },
                    { id: 'er_smooth', x: '30%', y: '55%', correct: 'er_smooth', label: 'RE-H' },
                    { id: 'golgi', x: '60%', y: '35%', correct: 'golgi', label: 'Golgi' },
                    { id: 'lysosome', x: '70%', y: '60%', correct: 'lysosome', label: 'Lisosom' }
                ],
                hints: [
                    "Nukleus di tengah sebagai pusat kendali",
                    "Mitokondria tersebar untuk distribusi energi yang merata",
                    "Sistem endomembran: RE ‚Üí Golgi ‚Üí Lisosom harus berdekatan"
                ]
            }
        ];

        function initializeGame() {
            updateStats();
            loadLevel(currentLevel);
        }

        function updateStats() {
            document.getElementById('currentLevel').textContent = currentLevel;
            document.getElementById('score').textContent = score;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('hintCount').textContent = hintCount;
            
            const progress = ((currentLevel - 1) / levels.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Level ${currentLevel} dari ${levels.length}`;
        }

        function loadLevel(levelNum) {
            if (levelNum > levels.length) {
                showGameComplete();
                return;
            }

            const level = levels[levelNum - 1];
            placedOrganelles = {};
            
            document.getElementById('levelTitle').textContent = level.title;
            document.getElementById('levelDescription').textContent = level.description;
            document.getElementById('challengeTitle').textContent = 'üéØ Tantangan:';
            document.getElementById('challengeText').textContent = level.challenge;
            
            createDropZones(level.dropZones);
            createOrganelleBank(level.organelles);
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('hintSystem').classList.remove('active');
        }

        function createDropZones(zones) {
            const cellDiagram = document.getElementById('cellDiagram');
            // Clear existing drop zones
            const existingZones = cellDiagram.querySelectorAll('.drop-zone');
            existingZones.forEach(zone => zone.remove());
            
            zones.forEach(zone => {
                const dropZone = document.createElement('div');
                dropZone.className = 'drop-zone';
                dropZone.id = `zone-${zone.id}`;
                dropZone.style.left = zone.x;
                dropZone.style.top = zone.y;
                dropZone.textContent = zone.label;
                dropZone.dataset.correct = zone.correct;
                
                dropZone.addEventListener('dragover', allowDrop);
                dropZone.addEventListener('drop', handleDrop);
                dropZone.addEventListener('dragenter', handleDragEnter);
                dropZone.addEventListener('dragleave', handleDragLeave);
                
                cellDiagram.appendChild(dropZone);
            });
        }

        function createOrganelleBank(organelleIds) {
            const organelleList = document.getElementById('organelleList');
            organelleList.innerHTML = '';
            
            organelleIds.forEach(id => {
                const organelle = organelleData[id];
                const item = document.createElement('div');
                item.className = 'organelle-item';
                item.draggable = true;
                item.dataset.organelle = id;
                
                item.innerHTML = `
                    <div class="organelle-icon" style="background-color: ${organelle.color}">
                        ${organelle.emoji}
                    </div>
                    <div class="organelle-info">
                        <div class="organelle-name">${organelle.name}</div>
                        <div class="organelle-function">${organelle.function}</div>
                    </div>
                `;
                
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
                
                organelleList.appendChild(item);
            });
        }

        function handleDragStart(e) {
            draggedElement = e.target.closest('.organelle-item');
            draggedElement.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            if (draggedElement) {
                draggedElement.classList.remove('dragging');
                draggedElement = null;
            }
        }

        function allowDrop(e) {
            e.preventDefault();
        }

        function handleDragEnter(e) {
            e.preventDefault();
            e.target.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.target.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const dropZone = e.target;
            dropZone.classList.remove('drag-over');
            
            if (!draggedElement) return;
            
            const organelleId = draggedElement.dataset.organelle;
            const organelle = organelleData[organelleId];
            
            // Remove any existing organelle in this zone
            const existingOrganelle = dropZone.querySelector('.placed-organelle');
            if (existingOrganelle) {
                existingOrganelle.remove();
                // Return the previous organelle to bank
                const prevId = existingOrganelle.dataset.organelle;
                const prevItem = document.querySelector(`[data-organelle="${prevId}"]`);
                if (prevItem) {
                    prevItem.classList.remove('used');
                }
                delete placedOrganelles[dropZone.id];
            }
            
            // Create placed organelle
            const placedOrganelle = document.createElement('div');
            placedOrganelle.className = 'placed-organelle';
            placedOrganelle.style.backgroundColor = organelle.color;
            placedOrganelle.textContent = organelle.emoji;
            placedOrganelle.dataset.organelle = organelleId;
            placedOrganelle.title = organelle.name;
            
            // Add click to remove functionality
            placedOrganelle.addEventListener('click', function() {
                removeOrganelle(dropZone.id, organelleId);
            });
            
            dropZone.appendChild(placedOrganelle);
            dropZone.classList.add('filled');
            
            // Mark organelle as used
            draggedElement.classList.add('used');
            placedOrganelles[dropZone.id] = organelleId;
            
            // Provide immediate feedback
            const isCorrect = dropZone.dataset.correct === organelleId;
            if (isCorrect) {
                dropZone.style.animation = 'correctPulse 0.6s ease';
                setTimeout(() => {
                    dropZone.style.animation = '';
                }, 600);
            }
        }

        function removeOrganelle(zoneId, organelleId) {
            const dropZone = document.getElementById(zoneId);
            const placedOrganelle = dropZone.querySelector('.placed-organelle');
            
            if (placedOrganelle) {
                placedOrganelle.remove();
                dropZone.classList.remove('filled');
                
                // Return organelle to bank
                const organelleItem = document.querySelector(`[data-organelle="${organelleId}"]`);
                if (organelleItem) {
                    organelleItem.classList.remove('used');
                }
                
                delete placedOrganelles[zoneId];
            }
        }

        function checkAnswer() {
            const level = levels[currentLevel - 1];
            let correctPlacements = 0;
            let totalZones = level.dropZones.length;
            let feedback = [];
            
            level.dropZones.forEach(zone => {
                const zoneElement = document.getElementById(`zone-${zone.id}`);
                const placedOrganelleId = placedOrganelles[`zone-${zone.id}`];
                
                if (placedOrganelleId === zone.correct) {
                    correctPlacements++;
                    zoneElement.classList.remove('wrong');
                    feedback.push(`‚úÖ ${organelleData[placedOrganelleId].name} benar!`);
                } else {
                    zoneElement.classList.add('wrong');
                    if (placedOrganelleId) {
                        feedback.push(`‚ùå ${organelleData[placedOrganelleId].name} salah tempat`);
                    } else {
                        feedback.push(`‚ö†Ô∏è ${zone.label} masih kosong`);
                    }
                }
            });
            
            const feedbackElement = document.getElementById('feedback');
            
            if (correctPlacements === totalZones) {
                feedbackElement.className = 'feedback correct';
                feedbackElement.innerHTML = `
                    <h3>üéâ Sempurna!</h3>
                    <p>Semua organel ditempatkan dengan benar!</p>
                    <p>Skor: +${correctPlacements * 10} poin</p>
                `;
                
                score += correctPlacements * 10;
                correctCount += correctPlacements;
                updateStats();
                
                document.getElementById('nextBtn').style.display = 'inline-block';
                document.getElementById('checkBtn').style.display = 'none';
            } else {
                feedbackElement.className = 'feedback wrong';
                feedbackElement.innerHTML = `
                    <h3>Belum Sempurna</h3>
                    <p>Benar: ${correctPlacements}/${totalZones}</p>
                    <div style="text-align: left; margin-top: 10px;">
                        ${feedback.join('<br>')}
                    </div>
                    <p style="margin-top: 10px;"><strong>Coba lagi atau gunakan hint!</strong></p>
                `;
                
                if (correctPlacements > 0) {
                    score += correctPlacements * 5;
                    correctCount += correctPlacements;
                    updateStats();
                }
            }
            
            feedbackElement.style.display = 'block';
        }

        function showHint() {
            if (hintCount <= 0) {
                alert('Hint sudah habis! Coba analisis sendiri berdasarkan fungsi organel.');
                return;
            }
            
            const level = levels[currentLevel - 1];
            const randomHint = level.hints[Math.floor(Math.random() * level.hints.length)];
            
            document.getElementById('hintText').textContent = randomHint;
            document.getElementById('hintSystem').classList.add('active');
            
            hintCount--;
            updateStats();
            
            setTimeout(() => {
                document.getElementById('hintSystem').classList.remove('active');
            }, 8000);
        }

        function nextLevel() {
            currentLevel++;
            if (currentLevel <= levels.length) {
                loadLevel(currentLevel);
                updateStats();
            } else {
                showGameComplete();
            }
        }

        function resetLevel() {
            // Clear all placed organelles
            Object.keys(placedOrganelles).forEach(zoneId => {
                const organelleId = placedOrganelles[zoneId];
                removeOrganelle(zoneId, organelleId);
            });
            
            // Reset feedback
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('checkBtn').style.display = 'inline-block';
            
            // Remove wrong classes
            document.querySelectorAll('.drop-zone.wrong').forEach(zone => {
                zone.classList.remove('wrong');
            });
        }

        function showGameComplete() {
            const gameArea = document.querySelector('.game-area');
            gameArea.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <h1>üèÜ Selamat!</h1>
                    <h2>Kamu telah menguasai struktur sel!</h2>
                    <div style="background: #c6f6d5; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <h3>Statistik Final:</h3>
                        <p><strong>Total Skor:</strong> ${score}</p>
                        <p><strong>Organel Benar:</strong> ${correctCount}</p>
                        <p><strong>Level Diselesaikan:</strong> ${levels.length}</p>
                    </div>
                    <p>Kamu telah memahami:</p>
                    <ul style="text-align: left; max-width: 400px; margin: 0 auto;">
                        <li>Fungsi setiap organel sel</li>
                        <li>Lokasi organel dalam sel</li>
                        <li>Hubungan antar organel</li>
                        <li>Perbedaan sel tumbuhan dan hewan</li>
                        <li>Sistem endomembran</li>
                    </ul>
                    <button class="btn btn-primary" onclick="location.reload()" style="margin-top: 20px;">
                        üîÑ Main Lagi
                    </button>
                </div>
            `;
        }

        // Initialize game when page loads
        window.addEventListener('load', initializeGame);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9848d1f8157cce89',t:'MTc1ODc4NTQ2OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
